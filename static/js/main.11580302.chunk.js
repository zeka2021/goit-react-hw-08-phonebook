(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{13:function(e,t,n){e.exports={bodyForm:"ContactForm_bodyForm__1Qlv3",wrapperForm:"ContactForm_wrapperForm__3Icui",stripesBlock:"ContactForm_stripesBlock__cQCld",formGrup:"ContactForm_formGrup__QGaZs",formGroupInput:"ContactForm_formGroupInput__3mtAH","form-groupLabel":"ContactForm_form-groupLabel__1tQxD",formGgroupLabel:"ContactForm_formGgroupLabel__krtjv",button:"ContactForm_button__3nUXT",submitButton:"ContactForm_submitButton__3Z60v"}},18:function(e,t,n){e.exports={filterForm:"Filter_filterForm__3hZGY",filterGrup:"Filter_filterGrup__1j925",filterGrupInput:"Filter_filterGrupInput__v6hIs",filterGrupLabel:"Filter_filterGrupLabel__36s7z"}},19:function(e,t,n){e.exports={itemContact:"Contact_itemContact__2HK4s",itemSpanContent:"Contact_itemSpanContent__1viig",button:"Contact_button__2OMHz"}},31:function(e,t,n){e.exports={listContainer:"ContactList_listContainer__JAgE4"}},41:function(e,t,n){e.exports={container:"Container_container__2Tcd_"}},57:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(20),i=n.n(o),s=n(4),l=n(36),u=n(8),j=n(14),b=n(3),d=n(24),f=n(11),m=Object(d.a)({reducerPath:"contactApi",baseQuery:Object(f.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["contact"],keepUnusedDataFor:30,endpoints:function(e){return{fetchContacts:e.query({query:function(){return"contacts"},providesTags:["contact"]}),deleteContact:e.mutation({query:function(e){return{url:"contacts/".concat(e),method:"DELETE"}},invalidatesTags:["contact"]}),addContact:e.mutation({query:function(e){return{url:"contacts",method:"POST",body:e}},invalidatesTags:["contact"]}),updateContact:e.mutation({query:function(e){var t=e.event,n=e.id;return{url:"contacts/".concat(n),method:"PATCH",body:t}},invalidatesTags:["contact"]})}}}),O=m.useFetchContactsQuery,p=m.useDeleteContactMutation,h=m.useAddContactMutation,x=(m.useUpdateContactMutation,Object(d.a)({reducerPath:"authApi",baseQuery:Object(f.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n,a=null===(n=(0,t.getState)())||void 0===n?void 0:n.token;return a&&e.set("authorization","Bearer ".concat(a)),e}}),tagTypes:["auth","current"],keepUnusedDataFor:0,endpoints:function(e){return{signup:e.mutation({query:function(e){return{url:"users/signup",method:"POST",body:e}},invalidatesTags:["auth"]}),login:e.mutation({query:function(e){return{url:"users/login",method:"POST",body:e}},invalidatesTags:["auth"]}),logout:e.mutation({query:function(){return{url:"users/logout",method:"POST"}},invalidatesTags:["auth"]}),current:e.query({query:function(){return"users/current"},invalidatesTags:["current"]})}}})),v=x.useSignupMutation,g=x.useLoginMutation,y=x.useLogoutMutation,_=x.useCurrentQuery,C=Object(b.b)("contact/filter"),k=Object(b.b)("setToken"),S=Object(b.b)("isLogin"),w=Object(b.d)("",Object(j.a)({},C,(function(e,t){return t.payload}))),F=Object(b.d)("",Object(j.a)({},k,(function(e,t){return t.payload}))),T=Object(b.d)(!1,Object(j.a)({},S,(function(e,t){return t.payload}))),L=n(6),N=n(16),G=n(40),A={key:"authData",storage:n.n(G).a,whitelist:["token","isLoggetIn"]},I=Object(L.b)((a={isLoggetIn:T,filter:w,token:F},Object(j.a)(a,m.reducerPath,m.reducer),Object(j.a)(a,x.reducerPath,x.reducer),a)),D=Object(N.g)(A,I),z=Object(b.a)({reducer:D,devTools:!1,middleware:function(e){return e({serializableCheck:{ignoredActions:[N.a,N.f,N.b,N.c,N.d,N.e]}}).concat(m.middleware).concat(x.middleware)}}),B=Object(N.h)(z),q=(n(57),n(58),n(9)),P=n(1),E={form:{margin:"auto",width:320},title:{textAlign:"center",color:"#ffffff"},label:{display:"flex",flexDirection:"column",marginBottom:15}};function M(){var e=Object(r.useState)(""),t=Object(q.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(q.a)(c,2),i=o[0],l=o[1],u=Object(r.useState)(""),j=Object(q.a)(u,2),b=j[0],d=j[1],f=v(),m=Object(q.a)(f,1)[0],O=Object(s.d)(),p=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":return a(r);case"email":return l(r);case"password":return d(r);default:return}},h=function(e){var t=e.data;console.log(t),O(k(t.token)),O(S(!0))};return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{style:E.title,children:"Sign up page"}),Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m({name:n,email:i,password:b}).then(h).catch((function(e){return console.log(e)})),a(""),l(""),d("")},style:E.form,autoComplete:"off",children:[Object(P.jsxs)("label",{style:E.label,children:["Name",Object(P.jsx)("input",{type:"text",name:"name",value:n,onChange:p})]}),Object(P.jsxs)("label",{style:E.label,children:["Email",Object(P.jsx)("input",{type:"email",name:"email",value:i,onChange:p})]}),Object(P.jsxs)("label",{style:E.label,children:["Password",Object(P.jsx)("input",{type:"password",name:"password",value:b,onChange:p})]}),Object(P.jsx)("button",{type:"submit",children:"Sign up"})]})]})}var Q={form:{margin:"auto",width:320},title:{textAlign:"center",color:"#ffffff"},label:{display:"flex",flexDirection:"column",marginBottom:15}};function H(){var e=Object(r.useState)(""),t=Object(q.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(q.a)(c,2),i=o[0],l=o[1],u=g(),j=Object(q.a)(u,1)[0],b=Object(s.d)(),d=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"email":return a(r);case"password":return l(r);default:return}},f=function(e){var t=e.data;b(k(t.token)),b(S(!0))};return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{style:Q.title,children:"Login page"}),Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j({email:n,password:i}).then(f).catch((function(e){return console.log(e)})),a(""),l("")},style:Q.form,autoComplete:"off",children:[Object(P.jsxs)("label",{style:Q.label,children:["Email",Object(P.jsx)("input",{type:"email",name:"email",value:n,onChange:d})]}),Object(P.jsxs)("label",{style:Q.label,children:["Password",Object(P.jsx)("input",{type:"password",name:"password",value:i,onChange:d})]}),Object(P.jsx)("button",{type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var U=n(42),Z=n(62),J=n(13),W=n.n(J);var K=function(e){var t=e.contacts,n=_().refetch,a=h(),c=Object(q.a)(a,1)[0],o=Object(r.useState)(""),i=Object(q.a)(o,2),s=i[0],l=i[1],u=Object(r.useState)(""),j=Object(q.a)(u,2),b=j[0],d=j[1];Object(r.useEffect)((function(){n()}),[t,n]);var f=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":l(a);break;case"number":d(a)}},m=function(){l(""),d("")};return Object(P.jsx)("div",{className:W.a.wrapperForm,children:Object(P.jsxs)("form",{className:W.a.bodyForm,onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name.includes(s)})))return window.alert("".concat(s," is already in contacts")),void m();c({name:s,number:b}),m()},children:[Object(P.jsxs)("div",{className:W.a.formGrup,children:[Object(P.jsxs)("label",{className:W.a.formGgroupLabel,children:["Name",Object(P.jsx)("input",{type:"text",value:s,onChange:f,name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,className:W.a.formGroupInput})]}),Object(P.jsxs)("label",{className:W.a.formGgroupLabel,children:["number",Object(P.jsx)("input",{type:"tel",value:b,onChange:f,name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,className:W.a.formGroupInput})]})]}),Object(P.jsx)("div",{className:W.a.submitButton,children:Object(P.jsx)("button",{className:W.a.button,type:"submit",children:"Add contact"})})]})})},R=n(18),X=n.n(R);var Y=function(){var e=Object(s.e)((function(e){return e.filter})),t=Object(s.d)();return Object(P.jsx)("div",{className:X.a.filterForm,children:Object(P.jsx)("div",{className:X.a.filterGrup,children:Object(P.jsxs)("label",{className:X.a.filterGrupLabel,children:["Find contacts by name",Object(P.jsx)("input",{className:X.a.filterGrupInput,type:"text",name:"filter",value:e,onChange:function(e){return t(C(e.currentTarget.value))}})]})})})},$=n(31),V=n.n($);var ee=function(e){var t=e.children;return Object(P.jsx)("div",{className:V.a.container,children:Object(P.jsx)("ul",{className:V.a.listContainer,children:t})})},te=n(19),ne=n.n(te);var ae=function(e){var t=e.contact,n=t.name,a=t.number,r=t.id,c=p(),o=Object(q.a)(c,1)[0];return Object(P.jsxs)("li",{className:ne.a.itemContact,children:[Object(P.jsx)("span",{className:ne.a.itemSpanContent,children:n}),Object(P.jsx)("span",{className:ne.a.itemSpanContent,children:a}),Object(P.jsx)("button",{className:ne.a.button,onClick:function(){return o(r)},children:"Delet contact"})]})};function re(){var e=O().data,t=Object(s.e)((function(e){return e.filter})),n=function(e){return e?Object(U.a)(e).filter((function(e){return e.name.toLowerCase().includes(t)})):null};return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{className:"title",children:"Phonebook"}),Object(P.jsx)(K,{contacts:e}),Object(P.jsx)("h2",{className:"title",children:"Contacts"}),Object(P.jsx)(Y,{}),Object(P.jsx)(ee,{children:n(e)&&n(e).map((function(e){return Object(P.jsx)(ae,{contact:e},Object(Z.a)())}))})]})}var ce=n(15),oe=n(26),ie=function(e){return e.isLoggetIn},se=["children","redirectTo"];function le(e){var t=e.children,n=e.redirectTo,a=void 0===n?"/login":n,r=Object(oe.a)(e,se),c=Object(s.e)(ie);return Object(P.jsx)(u.d,Object(ce.a)(Object(ce.a)({},r),{},{children:c?t:Object(P.jsx)(u.c,{to:a})}))}var ue=["children","restricted","redirectTo"];function je(e){var t=e.children,n=e.restricted,a=void 0!==n&&n,r=e.redirectTo,c=void 0===r?"/login":r,o=Object(oe.a)(e,ue),i=Object(s.e)(ie)&&a;return Object(P.jsx)(u.d,Object(ce.a)(Object(ce.a)({},o),{},{children:i?Object(P.jsx)(u.c,{to:c}):t}))}var be={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,fontSize:24},activeLink:{color:"#ffffff"}},de=function(){var e=Object(s.e)(ie);return Object(P.jsx)("nav",{children:e&&Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(u.b,{to:"/contacts",exact:!0,style:be.link,activeStyle:be.activeLink,children:"Contacts"})})})},fe={container:{display:"flex",alignItems:"center"},name:{fontWeight:700,marginRight:12,fontSize:20},user:{color:"#ffffff",fontSize:20}};function me(){var e=y(),t=Object(q.a)(e,1)[0],n=Object(s.d)(),a=_().data;function r(){n(k("")),n(S(!1))}return Object(P.jsxs)("div",{style:fe.container,children:[Object(P.jsxs)("span",{style:fe.name,children:["Welcome, ",Object(P.jsx)("span",{style:fe.user,children:null===a||void 0===a?void 0:a.name})]}),Object(P.jsx)("button",{type:"button",onClick:function(){t().then(r).catch((function(e){return console.log(e)}))},children:"LogOut"})]})}var Oe={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#ffffff",fontSize:20},activeLink:{color:"#E84A5F"}};function pe(){return Object(P.jsxs)("div",{children:[Object(P.jsx)(u.b,{to:"/register",exact:!0,style:Oe.link,activeStyle:Oe.activeLink,children:"Sign up"}),Object(P.jsx)(u.b,{to:"/login",exact:!0,style:Oe.link,activeStyle:Oe.activeLink,children:"Login"})]})}var he=n(41),xe=n.n(he);var ve=function(e){var t=e.children;return Object(P.jsx)("div",{className:xe.a.container,children:t})},ge={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function ye(){var e=Object(s.e)(ie);return Object(P.jsx)(ve,{children:Object(P.jsxs)("header",{style:ge.header,children:[Object(P.jsx)(de,{}),e?Object(P.jsx)(me,{}):Object(P.jsx)(pe,{})]})})}var _e=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(ye,{}),Object(P.jsx)(u.e,{children:Object(P.jsxs)(r.Suspense,{fallback:Object(P.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:[Object(P.jsx)(je,{exact:!0,path:"/register",restricted:!0,children:Object(P.jsx)(M,{})}),Object(P.jsx)(je,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(P.jsx)(H,{})}),Object(P.jsx)(le,{path:"/contacts",redirectTo:"/login",children:Object(P.jsx)(re,{})}),Object(P.jsx)(u.d,{render:function(){return Object(P.jsx)(u.c,{to:{pathname:"/register"}})}})]})})]})};i.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(s.a,{store:z,children:Object(P.jsx)(l.a,{loading:null,persistor:B,children:Object(P.jsx)(u.a,{children:Object(P.jsx)(_e,{})})})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.11580302.chunk.js.map